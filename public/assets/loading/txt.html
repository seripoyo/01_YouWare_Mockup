<style>
    * {
        box-sizing: border-box;
        padding: 0;
        margin: 0;
    }

    body {
        padding-top: 48px;
        font-family: "Shippori Mincho", serif;
        background-color: #494039;
    }

    .container {
        width: 100%;
        max-width: 640px;
        min-height: 200vh;
        padding-top: 70vh;
        margin: 0 auto;
        container-type: inline-size;
        padding-bottom: 40px;
    }

    .imageAndHeadline {
        position: relative;
    }

    .image {
        display: block;
        width: 60cqw;
        max-width: 480px;
        height: auto;

        img {
            width: 100%;
            height: auto;
        }
    }

    .text {
        position: absolute;
        top: 15%;
        left: 45%;
        width: 50cqw;
    }

    .hidden {
        opacity: 0;
    }

    .headline {
        margin-bottom: 0.7em;
        font-size: 5.8cqw;
        font-weight: normal;
        line-height: 1;
        color: #fff;
        letter-spacing: 0.05em;
    }

    .description {
        width: 90%;
        font-size: 1.8cqw;
        line-height: 1.7;
        color: #fff;
        letter-spacing: 0.05em;
    }

    .divide {
        display: grid;
        grid-template-columns: 50% 50%;
        max-width: 640px;
        margin: 0 auto;
    }

    .compareTitle {
        position: relative;
        top: -20cqw;
        height: 0;
        font-size: 20px;
        color: #fff;
    }

    .resetButton {
        padding: 6px 16px;
        margin-top: 48px;
        font-family: "Shippori Mincho", serif;
        color: #fff;
        appearance: none;
        cursor: pointer;
        background-color: transparent;
        border: 1px solid #fff;
        border-radius: 0;
    }

    .indexList {
        max-width: 720px;
        padding-top: 48px;
        margin: 0 auto;
        list-style: none;

        li {
            margin: 1em 0;
        }

    }

    .basic {
        opacity: 0;
        translate: 0 15%;

        &.isActive {
            opacity: 1;
            translate: 0;
            transition-timing-function: linear;
            transition-duration: 1.4s;
        }
    }

    .advanced {
        --ease-out-quint: cubic-bezier(0.22, 1, 0.36, 1);
        --ease-out-cubic: cubic-bezier(0.33, 1, 0.68, 1);

        opacity: 0;
        translate: 0 13%;

        &.isActive {
            opacity: 1;
            translate: 0;
            transition-timing-function:
                opacity var(--ease-out-cubic),
                translate var(--ease-out-quint);
            transition-duration: 1.8s;
        }
    }

    .split {
        --ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);
        --ease-in-quad: cubic-bezier(0.11, 0, 0.5, 0);

        .splitText .char {
            opacity: 0;
            translate: 0 100%;
        }

        &.isActive {
            .headline .char {
                --delay: 0.05s;

                opacity: 1;
                translate: 0;
                transition:
                    opacity 0.7s var(--ease-in-quad) calc(var(--delay) * var(--index)),
                    translate 1.4s var(--ease-out-quart) calc(var(--delay) * var(--index));
            }

            .description .char {
                --delay: 0.003s;

                opacity: 1;
                translate: 0;
                transition:
                    opacity 0.5s var(--ease-in-quad) calc(var(--delay) * var(--index) + 0.23s),
                    translate 1.3s var(--ease-out-quart) calc(var(--delay) * var(--index) + 0.23s);
            }
        }
    }
</style>
<p class="loading-text">Loading...</p>

<script>
    const segmenterJa = new Intl.Segmenter("ja", { granularity: "grapheme" });
/**
 * 文字を個別に分解してindexをふったうえでspanタグで囲みます
 * @param selector {string}
 */
export const splitText = (selector) => {
  document.querySelectorAll(selector).forEach((element) => {
    const text = element.textContent.trim();
    const graphemeSegments = segmenterJa.segment(text);
    element.innerHTML = ""; // 元のテキストをクリア
    Array.from(graphemeSegments).forEach(({ segment }, index) => {
      const span = document.createElement("span");
      span.textContent = segment;
      span.classList.add("char");
      span.style.setProperty("--index", String(index));
      span.style.display = "inline-block";
      element.appendChild(span);
    });
  });
};

/**
 * 文字を個別に分解してindexをふったうえでspanタグを2重に囲みます
 * @param selector {string} querySelectorによる要素指定
 */
export const splitTextDoubleSpan = (selector) => {
  document.querySelectorAll(selector).forEach((element) => {
    const text = element.textContent.trim();
    const graphemeSegments = segmenterJa.segment(text);
    element.innerHTML = ""; // 元のテキストをクリア
    Array.from(graphemeSegments).forEach(({ segment }, index) => {
      const span = document.createElement("span");
      const span2 = document.createElement("span");
      span.textContent = segment;
      span.style.display = "inline-block";
      span.classList.add("char");
      span2.style.display = "inline-block";
      span2.style.setProperty("--index", String(index));
      // 入れ子にする
      span2.appendChild(span);
      element.appendChild(span2);
    });
  });
};
</script>

